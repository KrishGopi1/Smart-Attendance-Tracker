{% extends "layout.html" %}
{% block body %}
<h2>Attendance Dashboard</h2>
<form method="get" action="{{ url_for('main.dashboard') }}">
<select name="class" onchange="this.form.submit()">
{% for c in classes %}
<option value="{{ c }}" {% if c==selected %}selected{% endif %}>{{ c }}</option>
{% endfor %}
</select>
</form>
<form method="post">
<input type="hidden" name="class_name" value="{{ selected }}">
<table>
<thead><tr><th>Roll</th><th>Name</th><th>Present</th></tr></thead>
<tbody>
{% for s in students %}
<tr>
<td>{{ s.roll }}</td>
<td>{{ s.name }}</td>
<td><input type="checkbox" name="present" value="{{ s.id }}" {% if s.id in present_ids %}checked disabled{% endif %}></td>
</tr>
{% endfor %}
</tbody>
</table>
<button type="submit">Submit Attendance</button>
</form>
{% endblock %}
